<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../lambda2.ico">
        

	<title>yinsGraph - Laplacians.jl</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../Laplacians.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../about/index.html">Laplacians.jl</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../about/index.html">About</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../Julia/index.html">Using Julia</a>
</li>

                        
                            
<li >
    <a href="../Laplacians/index.html">Overview</a>
</li>

                        
                            
<li class="active">
    <a href="index.html">yinsGraph</a>
</li>

                        
                            
<li >
    <a href="../solvers/index.html">Solvers</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">API <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../wholeAPI/index.html">Whole API</a>
</li>

                        
                            
<li >
    <a href="../graphGeneratorsAPI/index.html">graphGenerators.md</a>
</li>

                        
                            
<li >
    <a href="../graphOpsAPI/index.html">graphOpsAPI.md</a>
</li>

                        
                            
<li >
    <a href="../graphAlgsAPI/index.html">graphAlgs.md</a>
</li>

                        
                            
<li >
    <a href="../cutPageRankAPI/index.html">cutPageRank</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../Laplacians/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../solvers/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
                    <li>
                        <a href="https://github.com/danspielman/Laplacians.jl">
                            
                                <i class="fa fa-github"></i>
                            
                            GitHub
                        </a>
                    </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#yinsgraph">yinsGraph</a></li>
        
            <li><a href="#to-install-yinsgraph">To install yinsGraph</a></li>
        
            <li><a href="#to-use-yinsgraph">To use yinsGraph</a></li>
        
            <li><a href="#to-develop-yinsgraph">To develop yinsGraph</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<div class="toc">
<ul>
<li><a href="#yinsgraph">yinsGraph</a><ul>
<li><a href="#to-install-yinsgraph">To install yinsGraph</a></li>
<li><a href="#to-use-yinsgraph">To use yinsGraph</a><ul>
<li><a href="#graph-generators">Graph generators:</a></li>
<li><a href="#operations-on-graphs">Operations on Graphs:</a></li>
<li><a href="#fundamental-graph-algorithms">Fundamental Graph Algorithms:</a></li>
<li><a href="#solving-linear-equations">Solving Linear equations:</a></li>
</ul>
</li>
<li><a href="#to-develop-yinsgraph">To develop yinsGraph</a><ul>
<li><a href="#using-sparse-matrices-as-graphs">Using sparse matrices as graphs</a></li>
<li><a href="#parametric-types">Parametric Types</a></li>
<li><a href="#data-structures">Data structures:</a></li>
<li><a href="#interface-issue">Interface issue:</a></li>
<li><a href="#writing-tests">Writing tests:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="yinsgraph">yinsGraph</h1>
<p>yinsGraph is a package that I (Dan) am writing to explore and manipulate graphs in Julia.  The graphs are represented as sparse matrices.  The particular class in Julia is called a SparseMatrixCSC.  The reasons for this are:</p>
<ul>
<li>They are fast, and</li>
<li>We want to do linear algebra with them, so matrices help.</li>
</ul>
<p>You can probably learn more about the CSC (Compressed Sparse Column) format by googling it.</p>
<p>So far, speed tests of code that I've written for connected components, shorest paths, and minimum spanning trees have been as fast or faster than the previous routines I could call from Matlab.</p>
<h2 id="to-install-yinsgraph">To install yinsGraph</h2>
<p>you will need a number of packages.
You install these like</p>
<pre><code>Pkg.add(&quot;PyCall&quot;)
Pkg.add(&quot;PyPlot&quot;)
Pkg.add(&quot;DataStructures&quot;)
</code></pre>

<p>I also recommend the Optim package.</p>
<p>I think you need to install matplotlib in python before PyPlot.
Look at this page for more information: https://github.com/stevengj/PyPlot.jl</p>
<p>I'm not sure if there are any others.  If you find that there are, please list them above.</p>
<h2 id="to-use-yinsgraph">To use yinsGraph</h2>
<p>Examples of how to do many things in yinsGraph may be found in the IJulia notebooks.  These have the extensions .ipynb.  When they look nice, I think it makes sense to convert them to .html.</p>
<p>Right now, the notebooks worth looking at are:</p>
<ul>
<li><a href="index.html">yinsGraph</a> - usage, demo, and speed tests</li>
<li>
<p><a href="../solvers/index.html">Solvers</a> - code for solving equations.  How to use direct methods, conjugate gradient, and a preconditioned augmented spanning tree solver.</p>
</li>
<li>
<p><a href="../solvers/index.html#iterative-solvers">IterativeSolvers</a> The implementation of CG in IterativeSolvers sort of sucks, as I now see in the tests.  It is allocating way to much memory.  It should be fixed either by devectorizing (see Julia Performance Tips), or by using BLAS routines.</p>
</li>
</ul>
<p>(I suggest that you open the html in your browser)</p>
<h3 id="graph-generators">Graph generators:</h3>
<pre><code class="julia"> readIJ(filename::String)
 readIJV(filename::String)
 writeIJV(filename::String, mat)
 ringGraph(n::Int64)
 generalizedRing(n::Int64, gens)
 randMatching(n::Int64)
 randRegular(n::Int64, k::Int64)
 grownGraph(n::Int64, k::Int64)
 grownGraphD(n::Int64, k::Int64)
 prefAttach(n::Int64, k::Int64, p::Float64)
 hyperCube(d::Int64)
 completeBinaryTree(n::Int64)
 grid2(n::Int64)
 grid2(n::Int64, m::Int64; isotropy=1)
 grid2coords(n::Int64, m::Int64)
</code></pre>

<ul>
<li>[ ] The types in the arguments of those should probably be more flexible/general.</li>
</ul>
<p>For example, to generate a 4-by-5 grid, you type</p>
<pre><code class="julia">graph = grid2(4,5)
</code></pre>

<h3 id="operations-on-graphs">Operations on Graphs:</h3>
<ul>
<li><code>shortIntGraph</code>  for converting the index type of a graph to an Int32.</li>
<li><code>lap</code>  to produce the laplacian of a graph</li>
<li>[ ] Maybe this should grab the upper triangular part, and symmetrize first.</li>
<li><code>unweight</code> - change all the weights to 1</li>
<li><code>mapweight{Tval,Tind}(a::SparseMatrixCSC{Tval,Tind},f)</code>  to apply the function f to the weight of every edge.</li>
<li><code>uniformWeight</code>  an example of mapweight.  It ignores the weight, and maps every weight to a random in [0,1]</li>
<li><code>productGraph(a0::SparseMatrixCSC, a1::SparseMatrixCSC)</code> the cartesian product.  Given two paths it makes a grid.</li>
<li><code>edgeVertexMat(mat::SparseMatrixCSC)</code>  signed edge vertex matrix</li>
<li><code>subsampleEdges(a::SparseMatrixCSC{Float64,Int64}, p::Float64)</code>
  produce a new graph that keeps each edge with probability p.</li>
<li><code>twoLift(a, k)</code> create a 2-lift of a with k flipped edges.  If k is unspecified, this generates a random 2-lift.</li>
<li><code>joinGraphs(a, b, k)</code> create a disjoint union of a and b, and add k random edges between them</li>
<li><code>plotGraph(gr,x,y,color=[0,0,1];dots=true,setaxis=true,number=false)</code></li>
<li><code>spectralDrawing(graph)</code></li>
</ul>
<h3 id="fundamental-graph-algorithms">Fundamental Graph Algorithms:</h3>
<ul>
<li><code>components</code> computes connected components, returns as a vector</li>
<li><code>vecToComps</code> turns into an array with a list of vertices in each component</li>
<li><code>shortestPaths(mat, start)</code>  returns an array of distances,
    and pointers to the node closest (parent array)</li>
<li><code>kruskal(mat; kind=:min)</code>  to get a max tree, use <code>kind = :max</code>
    returns it as a sparse matrix.</li>
</ul>
<h3 id="solving-linear-equations">Solving Linear equations:</h3>
<p>We have implemented Conjugate Gradient (cg) and the Preconditioned Conjugate Gradient (pcg).  These implementations use BLAS when they can, and a slower routine for data types like BigFloat.</p>
<p>To learn more, read <a href="../solvers/index.html">solvers.md</a>.</p>
<h2 id="to-develop-yinsgraph">To develop yinsGraph</h2>
<p>Just go for it.
Don't worry about writing fast code at first.
Just get it to work.
We can speed it up later.
The yinsGraph.ipynb notebook contains some examples of speed tests.
Within some of the files, I am keeping old, unoptimized versions of code around for comparison (and for satisfaction).  I will give them the name "XSlow"</p>
<p>I think that each file should contain a manifest up top listing the functions and types that it provides.  They should be divided up into those that are for internal use only, and those that should be exported.  Old code that didn't work well, but which you want to keep for reference should go at the end.</p>
<h3 id="using-sparse-matrices-as-graphs">Using sparse matrices as graphs</h3>
<p>The routines <code>deg</code>, <code>nbri</code> and <code>weighti</code> will let you treat a sparse matrix like a graph.</p>
<p><code>deg(graph, u)</code> is the degree of node u.
<code>nbri(graph, u, i)</code> is the ith neighbor of node u.
<code>weighti(graph, u, i)</code> is the weight of the edge to the ith neighbor of node u.</p>
<p>Note that we start indexing from 1.</p>
<p>For example, to iterate over the neighbors of node v,
  and play with the attached nodes, you could write code like:</p>
<pre><code class="julia">  for i in 1:deg(mat, v)
     nbr = nbri(mat, v, i)
     wt = weighti(mat, v, i)
     foo(v, nbr, wt)
  end
</code></pre>

<p>But, this turns out to be much slower than working with the structure directly, like</p>
<pre><code class="julia">  for ind in mat.colptr[v]:(mat.colptr[v+1]-1)
      nbr = mat.rowval[ind]
      wt = mat.nzval[ind]
      foo(v, nbr, wt)
  end
</code></pre>

<ul>
<li>[ ] Maybe we can make a macro to replace those functions.  It could be faster and more readable.</li>
</ul>
<h3 id="parametric-types">Parametric Types</h3>
<p>A sparse matrix has two types associated with it: the types of its indices (some sort of integer) and the types of its values (some sort of number).  Most of the code has been written so that once these types are fixed, the type of everything else in the function has been too.  This is accomplished by putting curly braces after a function name, with the names of the types that we want to use in the braces.  For example,</p>
<pre><code class="julia">shortestPaths{Tv,Ti}(mat::SparseMatrixCSC{Tv,Ti}, start::Ti)
</code></pre>

<p><code>Tv</code>, sometimes written <code>Tval</code> denotes the types of the values, and <code>Ti</code> or <code>Tind</code> denotes the types of the indices.  This function will only be called if the node from which we compute the shortest paths, <code>start</code> is of type <code>Ti</code>.  Inside the code, whenever we write something like <code>pArray = zeros(Ti,n)</code>, it creates an array of zeros of type Ti.  Using these parameteric types is <em>much</em> faster than leaving the types unfixed.</p>
<h3 id="data-structures">Data structures:</h3>
<ul>
<li><code>IntHeap</code> a heap that stores small integers (like indices of nodes in a graph) and that makes deletion fast.  Was much faster than using Julia's more general heap.</li>
</ul>
<h3 id="interface-issue">Interface issue:</h3>
<p>There are many different sorts of things that our code could be passing around.  For example, kruskal returns a graph as a sparse matrix.  But, we could use a format that is more specialized for trees, like the RootedTree type.  At some point, when we optimize code, we will need to figure out the right interfaces between routines.  For example, some routines symmetrize at the end.  This is slow, and should be skipped if not necessary.  It also doubles storage.</p>
<h3 id="writing-tests">Writing tests:</h3>
<p>I haven't written any yet.  I'll admit that I'm using the notebooks as tests.  If I can run all the cells, then it's all good.</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
        <script src="../mathjaxhelper.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
